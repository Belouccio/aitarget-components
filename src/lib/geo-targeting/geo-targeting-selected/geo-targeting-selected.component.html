<div *ngIf="(model$ | async).items && (model$ | async).items.length"
     class="geo-targeting-selected__content">
  <!--Group of items which belong to the same country-->
  <div class="geo-targeting-selected__group"
       [ngClass]='{"geo-targeting-selected__group_hover": groupHovered[key]}'
       *ngFor="let key of (itemsGroupedByCountry$ | async).keys; let last = last">
    <!--Title (country name)-->
    <div class="geo-targeting-selected__group-title"
         (mouseenter)="hoverGroup(key, true)"
         (mouseleave)="hoverGroup(key, false)">
      <span class="geo-targeting-selected__group-name">{{ (itemsGroupedByCountry$ | async).map[key].name }}</span>
      <span class="geo-targeting-selected__remove geo-targeting-selected__remove-group"
            (click)="removeGroup(key, $event)">&times;</span>
    </div>
    <!--List of items-->
    <div class="geo-targeting-selected__items">
      <div class="geo-targeting-selected__item"
           (click)="showItemOnMap(item)"
           *ngFor="let item of (itemsGroupedByCountry$ | async).map[key].items">

        <geo-targeting-mode
          class="geo-targeting-selected__mode"
          #itemMode
          [selectedMode]="item.excluded ? (modelMode$ | async).modes[1] : (modelMode$ | async).modes[0]"
          [isOpen]="itemMode.isOpen"
          (toggle)="toggleModeDropdown(itemMode, $event)"
          (modeChange)="modeChange(item, $event)"></geo-targeting-mode>

        <span>{{ item | fullName }}</span>

        <geo-targeting-radius *ngIf="item.type === 'city' || item.type === 'custom_location'"
                              [item]="item"></geo-targeting-radius>

        <span class="geo-targeting-selected__remove geo-targeting-selected__remove-item"
              (click)="removeItem(item, $event)">&times;</span>
      </div>
    </div>
    <div class="geo-targeting-selected__group-devider"
         *ngIf="!last"></div>
  </div>
</div>
